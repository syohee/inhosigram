!function(o){o.extend({uploadPreview:function(e){var a=o.extend({input_field:".image-input",preview_box:".image-preview",label_field:".image-label",label_default:"Choose File",label_selected:"Change File",no_label:!1,success_callback:null},e);return window.File&&window.FileList&&window.FileReader?void(void 0!==o(a.input_field)&&null!==o(a.input_field)&&o(a.input_field).change(function(){var e=this.files;if(0<e.length){var i=e[0],l=new FileReader;l.addEventListener("load",function(e){var l=e.target;i.type.match("image")?(o(a.preview_box).css("background-image","url("+l.result+")"),o(a.preview_box).css("background-size","cover"),o(a.preview_box).css("background-position","center center")):i.type.match("audio")?o(a.preview_box).html("<audio controls><source src='"+l.result+"' type='"+i.type+"' />Your browser does not support the audio element.</audio>"):alert("This file type is not supported yet.")}),0==a.no_label&&o(a.label_field).html(a.label_selected),l.readAsDataURL(i),a.success_callback&&a.success_callback()}else 0==a.no_label&&o(a.label_field).html(a.label_default),o(a.preview_box).css("background-image","none"),o(a.preview_box+" audio").remove()})):(alert("You need a browser with file reader support, to use this form properly."),!1)}})}(jQuery);